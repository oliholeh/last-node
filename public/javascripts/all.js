$(function(){var e=!0;$(".switch-button").on("click",function(r){r.preventDefault(),$("input").each(function(e){$(this).val("")}),$("p.error").remove(),$("input").removeClass("error"),e?(e=!1,$(".register").show("slow"),$(".login").hide()):(e=!0,$(".login").show("slow"),$(".register").hide())}),$("input").on("focus",function(){$("p.error").remove(),$("input").removeClass("error")}),$(".register-button").on("click",function(e){e.preventDefault();var r={login:$("#register-login").val(),password:$("#register-password").val(),passwordConfirm:$("#register-password-confirm").val()};$.ajax({type:"POST",data:JSON.stringify(r),contentType:"application/json",url:"/api/auth/register"}).done(function(e){e.ok?($(location).attr("href","/"),setTimeout(function(){$("p.success").remove()},3e3)):($(".register h2").after('<p class="error">'+e.error+"</p>"),e.fields&&e.fields.length>0&&e.fields.forEach(function(e){$("input[name="+e+"]").addClass("error")}),setTimeout(function(){$("p.error").remove()},3e3))})}),$(".login-button").on("click",function(e){e.preventDefault();var r={login:$("#login-login").val(),password:$("#login-password").val()};$.ajax({type:"POST",data:JSON.stringify(r),contentType:"application/json",url:"/api/auth/login"}).done(function(e){e.ok?($(location).attr("href","/"),setTimeout(function(){$("p.success").remove()},3e3)):($(".login h2").after('<p class="error">'+e.error+"</p>"),e.fields&&e.fields.length>0&&e.fields.forEach(function(e){$("input[name="+e+"]").addClass("error")}),setTimeout(function(){$("p.error").remove()},3e3))})})});